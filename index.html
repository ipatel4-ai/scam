<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valentine?</title>
  <style>
    :root{
      --pink:#ffe4ef;
      --hot:#ff2f7a;
      --shadow: 0 14px 40px rgba(0,0,0,0.12);
    }

    body{
      margin:0;
      height:100vh;
      display:grid;
      place-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      overflow:hidden;
      background-color: var(--pink);
      position:relative;
    }

    /* Cute heart-outline pattern background */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:0.22;
      background-repeat:repeat;
      background-size: 120px 120px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cg fill='none' stroke='%23ff2f7a' stroke-width='3'%3E%3Cpath d='M60 78 C45 66 30 56 30 42 C30 32 38 25 48 25 C55 25 59 29 60 32 C61 29 65 25 72 25 C82 25 90 32 90 42 C90 56 75 66 60 78 Z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .card{
      background: rgba(255,255,255,0.92);
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 20px;
      padding: 30px 26px;
      box-shadow: var(--shadow);
      text-align:center;
      width:min(560px, 92vw);
      position:relative;
      z-index:2;
      backdrop-filter: blur(6px);
    }

    h1{
      margin:0 0 10px;
      font-size: clamp(28px, 4vw, 44px);
      color:#222;
    }

    p{
      margin: 0 0 18px;
      color:#444;
    }

    .buttons{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:14px;
      flex-wrap:wrap;
      position:relative;
      z-index:2;
    }

    button{
      font-size:18px;
      padding:12px 22px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      transition: transform 120ms ease, filter 120ms ease;
    }
    button:active{ transform: scale(0.98); }

    #yesBtn{
      background: var(--hot);
      color:white;
      box-shadow: 0 10px 22px rgba(255,47,122,0.25);
    }

    /* "No bundle": devil + button */
    #noWrap{
      display:inline-flex;
      align-items:center;
      gap:10px;
    }

    #devil{
      font-size:24px;
      line-height:1;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.15));
      transform: translateY(1px);
    }

    #noBtn{
      background:#ededed;
      color:#222;
    }

    .result{
      margin-top:16px;
      font-size:18px;
      font-weight:700;
      color: var(--hot);
      min-height:24px;
    }

    /* When the No bundle becomes "free", it floats around the screen smoothly */
    #noWrap.free{
      position:fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index:5;
      transition: left 420ms cubic-bezier(.2,.9,.2,1),
                  top  420ms cubic-bezier(.2,.9,.2,1);
      will-change:left, top;
    }

    /* Little wiggle when it moves */
    #noWrap.free.scamper{
      animation: wiggle 240ms ease-in-out;
    }

    @keyframes wiggle{
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      35%{ transform: translate(-50%, -50%) rotate(-4deg); }
      70%{ transform: translate(-50%, -50%) rotate(3deg); }
      100%{ transform: translate(-50%, -50%) rotate(0deg); }
    }
  </style>
</head>

<body>
  <div class="card" id="card">
    <h1>Do you want to be my valentine?</h1>
    <p>(Choose wisely ðŸ˜Œ)</p>

    <div class="buttons" id="buttonRow">
      <button id="yesBtn">Yes ðŸ’–</button>

      <!-- Starts normally right next to Yes -->
      <span id="noWrap">
        <span id="devil" title="Nice try ðŸ˜ˆ">ðŸ˜ˆ</span>
        <button id="noBtn">No ðŸ™ƒ</button>
      </span>
    </div>

    <div class="result" id="result"></div>
  </div>

  <script>
    const noWrap = document.getElementById("noWrap");
    const noBtn  = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const result = document.getElementById("result");
    const card   = document.getElementById("card");

    let isFree = false;

    function clamp(val, min, max) {
      return Math.max(min, Math.min(max, val));
    }

    function isOverlappingCard(x, y, w, h) {
      const r = card.getBoundingClientRect();
      const pad = 18;
      return !(
        x + w < r.left - pad ||
        x > r.right + pad ||
        y + h < r.top - pad ||
        y > r.bottom + pad
      );
    }

    function detachIfNeeded() {
      if (isFree) return;

      // Remember its current screen position so it doesn't "jump"
      const rect = noWrap.getBoundingClientRect();

      // Make it free-floating, locked to its current position
      noWrap.classList.add("free");
      noWrap.style.left = `${rect.left + rect.width/2}px`;
      noWrap.style.top  = `${rect.top  + rect.height/2}px`;

      isFree = true;
    }

    function moveNoSomewhere() {
      if (!isFree) detachIfNeeded();

      const rect = noWrap.getBoundingClientRect();
      const w = rect.width;
      const h = rect.height;

      const margin = 12;
      const maxX = window.innerWidth  - w - margin;
      const maxY = window.innerHeight - h - margin;

      let x, y, tries = 0;
      do {
        x = margin + Math.random() * Math.max(0, maxX - margin);
        y = margin + Math.random() * Math.max(0, maxY - margin);
        tries++;
      } while (isOverlappingCard(x, y, w, h) && tries < 10);

      noWrap.classList.remove("scamper");
      void noWrap.offsetWidth; // retrigger animation
      noWrap.classList.add("scamper");

      noWrap.style.left = `${clamp(x, margin, maxX)}px`;
      noWrap.style.top  = `${clamp(y, margin, maxY)}px`;
    }

    // Proximity detection (works even when it's still in the button row)
    function handleMouseMove(e) {
      const r = noWrap.getBoundingClientRect();
      const cx = r.left + r.width / 2;
      const cy = r.top  + r.height / 2;

      const dist = Math.hypot(e.clientX - cx, e.clientY - cy);

      // Only run away when she gets close
      const triggerDistance = 120;

      if (dist < triggerDistance) {
        moveNoSomewhere();
      }
    }

    window.addEventListener("mousemove", handleMouseMove);

    // Mobile: if she tries to tap near it, it runs
    noWrap.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNoSomewhere();
    }, { passive: false });

    // If somehow clicked, still escape
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      moveNoSomewhere();
    });

    yesBtn.addEventListener("click", () => {
      result.textContent = "YAY!!! ðŸ’˜ðŸ’˜ See you on Valentineâ€™s ðŸ˜„";
      yesBtn.disabled = true;
      noWrap.style.display = "none";
    });

    // Keep it on screen after resize if it's already free
    window.addEventListener("resize", () => {
      if (!isFree) return;
      moveNoSomewhere();
    });
  </script>
</body>
</html>

